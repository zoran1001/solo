<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的设计宇宙 - 后台管理</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .admin-header {
            background-color: #2d2d2d;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .admin-header h1 {
            color: #ff4757;
            font-size: 1.8rem;
        }
        
        .success-message {
            background-color: #2ed573;
            color: #ffffff;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            text-align: center;
            display: none;
        }
        
        .editor-section {
            background-color: #2d2d2d;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .editor-section h2 {
            color: #ff4757;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .module-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .add-btn, .save-btn, .publish-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .add-btn {
            background-color: #2ed573;
            color: #ffffff;
        }
        
        .save-btn {
            background-color: #3742fa;
            color: #ffffff;
        }
        
        .publish-btn {
            background-color: #ff4757;
            color: #ffffff;
        }
        
        .add-btn:hover, .save-btn:hover, .publish-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .editor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .editor-item {
            background-color: #3d3d3d;
            padding: 20px;
            border-radius: 6px;
        }
        
        .editor-item h3 {
            color: #ffa502;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .editor-item input[type="text"],
        .editor-item input[type="url"],
        .editor-item textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            background-color: #4d4d4d;
            border: 1px solid #5d5d5d;
            border-radius: 4px;
            color: #ffffff;
            font-size: 1rem;
        }
        
        .editor-item textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .editor-item input:focus,
        .editor-item textarea:focus {
            outline: none;
            border-color: #ff4757;
        }
        
        .image-preview {
            width: 100%;
            height: 200px;
            border: 2px dashed #5d5d5d;
            margin-bottom: 15px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .image-preview:hover {
            border-color: #ff4757;
        }
        
        .image-size-hint {
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #a0a0a0;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
        }
        
        .delete-btn {
            background-color: #ff4757;
            color: #ffffff;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .delete-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
        }
        
        .top-left-btn {
            float: right;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #ffa502;
        }
        
        /* 3D效果按钮 */
        .btn-3d {
            position: relative;
            overflow: hidden;
        }
        
        .btn-3d::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s ease;
        }
        
        .btn-3d:hover::before {
            left: 100%;
        }
    </style>
</head>
<body>
    <!-- 管理后台主容器 -->
    <div class="admin-container">
        <div class="admin-header">
            <h1>我的设计宇宙 - 后台管理</h1>
            <div class="action-buttons">
                <button class="save-btn btn-3d" onclick="saveData()">保存数据</button>
                <button class="publish-btn btn-3d" onclick="publishData()">发布更改</button>
            </div>
        </div>
        
        <div class="success-message" id="successMessage">保存成功！</div>
        
        <!-- 模块化管理区域 -->
        <div id="modulesContainer"></div>
    </div>
    
    <script>
        // 初始化数据
        const initialData = {
            images: {
                aboutImage: ''
            },
            texts: {
                heroTitle1: '设计无界',
                heroTitle2: '创意无限',
                heroSubtitle: '突破常规的设计之旅',
                heroCtaText: '探索作品',
                showcaseHeading: '我的设计作品',
                showcaseSubheading: '突破常规的创意表达',
                aboutHeading: '关于我',
                aboutParagraph1: '我是一位充满激情的设计师，专注于创造独特、有影响力的设计作品。我相信设计不仅仅是视觉上的美观，更是解决问题和传达情感的强大工具。',
                aboutParagraph2: '我的设计理念是将创新与简约相结合，突破常规，创造出令人难忘的设计体验。我不断探索新的设计技术和趋势，以保持作品的新鲜感和前瞻性。',
                aboutParagraph3: '我擅长将复杂的概念转化为简洁、有力的视觉语言，通过设计讲述故事，引发共鸣。',
                skillsHeading: '专业技能',
                skillsSubheading: '我的设计工具箱',
                skill1Title: '平面设计',
                skill2Title: 'UI/UX设计',
                skill3Title: '网页设计',
                skill4Title: '插画设计',
                skill5Title: '3D设计',
                skill6Title: '包装设计',
                contactHeading: '与我联系',
                contactSubheading: '开始我们的设计合作',
                contactEmail: 'design@example.com',
                contactPhone: '+86 123 4567 8910',
                socialInstagram: 'Instagram',
                socialBehance: 'Behance',
                socialDribbble: 'Dribbble',
                footerText: '© 2024 我的设计宇宙. 突破常规，创造无限可能.'
            }
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            let siteData = localStorage.getItem('portfolioSiteData');
            
            if (!siteData) {
                // 使用硬编码的初始数据
                localStorage.setItem('portfolioSiteData', JSON.stringify(initialData));
            }
            
            // 直接加载编辑器数据
            loadEditorData();
        });
        
        function loadEditorData() {
            // 获取现有数据
            const existingData = JSON.parse(localStorage.getItem('portfolioSiteData')) || {
                images: {},
                texts: {}
            };
            
            // 图片尺寸建议
            const imageSizes = {
                aboutImage: '建议尺寸：600x600（1:1）',
                heroBanner: '建议尺寸：1920x1080（16:9）',
                work: '建议尺寸：自适应'
            };
            
            // 定义模块结构，匹配作品集网站
            const modules = [
                {
                    name: '英雄区域',
                    key: 'hero',
                    images: ['heroBanner'],
                    texts: ['heroTitle1', 'heroTitle2', 'heroSubtitle', 'heroCtaText', 'edgeTextTop1', 'edgeTextTop2', 'edgeTextTop3', 'edgeTextBottom1', 'edgeTextBottom2', 'edgeTextBottom3']
                },
                {
                    name: '作品展示',
                    key: 'showcase',
                    dynamicWorks: true, // 支持动态增加的作品
                    texts: ['showcaseHeading', 'showcaseSubheading']
                },
                {
                    name: '关于我',
                    key: 'about',
                    images: ['aboutImage'],
                    texts: ['aboutHeading', 'aboutParagraph1', 'aboutParagraph2', 'aboutParagraph3']
                },
                {
                    name: '专业技能',
                    key: 'skills',
                    images: [],
                    texts: ['skillsHeading', 'skillsSubheading', 'skill1Title', 'skill2Title', 'skill3Title', 'skill4Title', 'skill5Title', 'skill6Title']
                },
                {
                    name: '联系方式',
                    key: 'contact',
                    images: [],
                    texts: ['contactHeading', 'contactSubheading', 'contactEmail', 'contactPhone', 'socialInstagram', 'socialBehance', 'socialDribbble']
                },
                {
                    name: '页脚',
                    key: 'footer',
                    images: [],
                    texts: ['footerText']
                }
            ];
            
            // 生成模块化编辑器
            const modulesContainer = document.getElementById('modulesContainer');
            modulesContainer.innerHTML = '';
            
            // 生成模块编辑器
            modules.forEach(module => {
                // 创建模块容器
                const moduleSection = document.createElement('div');
                moduleSection.className = 'editor-section';
                moduleSection.dataset.moduleKey = module.key;
                
                // 模块标题
                moduleSection.innerHTML = `<h2>${module.name}</h2>`;
                
                // 为支持动态作品的模块添加"添加作品"按钮
                if (module.dynamicWorks) {
                    const addButton = document.createElement('button');
                    addButton.className = 'add-btn top-left-btn';
                    addButton.textContent = '添加作品';
                    addButton.onclick = () => addDynamicWork();
                    moduleSection.appendChild(addButton);
                }
                
                // 创建编辑网格
                const editorGrid = document.createElement('div');
                editorGrid.className = 'editor-grid';
                
                // 处理支持动态作品的模块
                if (module.dynamicWorks) {
                    // 确保作品数据结构存在
                    if (!existingData.works) {
                        existingData.works = [];
                    }
                    
                    // 添加作品编辑项
                    existingData.works.forEach((work, index) => {
                        const editorItem = document.createElement('div');
                        editorItem.className = 'editor-item';
                        
                        // 初始化作品属性
                        const workData = {
                            image: work.image || '',
                            title: work.title || '',
                            category: work.category || '',
                            size: work.size || 'medium' // 默认中等大小
                        };
                        
                        editorItem.innerHTML = `
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h3>作品 ${index + 1}</h3>
                                <button class="delete-btn" onclick="deleteDynamicWork(${index})">删除</button>
                            </div>
                            
                            <!-- 作品图片 -->
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #ffa502;">作品图片</label>
                                <p class="image-size-hint">建议尺寸：自适应</p>
                                <div class="image-preview" id="preview-work-${index}" onclick="document.getElementById('work-${index}-image').focus()" style="background-image: url(${workData.image || ''})">
                                    ${!workData.image ? '<span style="color: #a0a0a0;">点击输入图片URL</span>' : ''}
                                </div>
                                <input type="url" id="work-${index}-image" value="${workData.image || ''}" placeholder="输入图片URL地址" onchange="updateWorkData(${index}, 'image', this.value)" />
                            </div>
                            
                            <!-- 作品标题 -->
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #ffa502;">作品标题</label>
                                <input type="text" id="work-${index}-title" value="${workData.title || ''}" placeholder="输入作品标题" onchange="updateWorkData(${index}, 'title', this.value)" />
                            </div>
                            
                            <!-- 作品类别 -->
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #ffa502;">作品类别</label>
                                <input type="text" id="work-${index}-category" value="${workData.category || ''}" placeholder="输入作品类别" onchange="updateWorkData(${index}, 'category', this.value)" />
                            </div>
                            
                            <!-- 作品大小 -->
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #ffa502;">作品大小</label>
                                <select id="work-${index}-size" onchange="updateWorkData(${index}, 'size', this.value)">
                                    <option value="large" ${workData.size === 'large' ? 'selected' : ''}>大</option>
                                    <option value="medium" ${workData.size === 'medium' ? 'selected' : ''}>中</option>
                                    <option value="small" ${workData.size === 'small' ? 'selected' : ''}>小</option>
                                </select>
                            </div>
                        `;
                        editorGrid.appendChild(editorItem);
                    });
                }
                
                // 处理静态图片
                (module.images || []).forEach(imageKey => {
                    if (existingData.images.hasOwnProperty(imageKey)) {
                        const value = existingData.images[imageKey];
                        const editorItem = document.createElement('div');
                        editorItem.className = 'editor-item';
                        editorItem.innerHTML = `
                            <h3>${imageKey.replace(/([A-Z])/g, ' $1').trim()}</h3>
                            <p class="image-size-hint">${imageSizes[imageKey] || '建议尺寸：自适应'}</p>
                            <div class="image-preview" id="preview-${imageKey}" onclick="document.getElementById('url-${imageKey}').focus()" style="background-image: url(${value || ''})">
                                ${!value ? '<span style="color: #a0a0a0;">点击输入图片URL</span>' : ''}
                            </div>
                            <input type="url" id="url-${imageKey}" value="${value || ''}" placeholder="输入图片URL地址" onchange="handleImageUrlChange('${imageKey}', this.value)" />
                        `;
                        editorGrid.appendChild(editorItem);
                    }
                });
                
                // 添加文案编辑项
                module.texts.forEach(textKey => {
                    const existingValue = existingData.texts[textKey] || '';
                    
                    // 只处理中文，不支持英文
                    const zhValue = typeof existingValue === 'object' && existingValue !== null ? existingValue['zh'] || '' : existingValue;
                    
                    // 检查是否为段落文本，使用textarea
                    const isParagraph = textKey.includes('Paragraph');
                    
                    let zhInput;
                    if (isParagraph) {
                        zhInput = `<textarea id="text-${textKey}" placeholder="输入中文文本" onchange="updateTextData('${textKey}', this.value)">${zhValue}</textarea>`;
                    } else {
                        zhInput = `<input type="text" id="text-${textKey}" value="${zhValue}" placeholder="输入中文文本" onchange="updateTextData('${textKey}', this.value)" />`;
                    }
                    
                    const editorItem = document.createElement('div');
                    editorItem.className = 'editor-item';
                    editorItem.innerHTML = `
                        <h3>${textKey.replace(/([A-Z])/g, ' $1').trim()}</h3>
                        ${zhInput}
                    `;
                    editorGrid.appendChild(editorItem);
                });
                
                moduleSection.appendChild(editorGrid);
                modulesContainer.appendChild(moduleSection);
            });
        }
        
        // 添加动态作品
        function addDynamicWork() {
            const data = JSON.parse(localStorage.getItem('portfolioSiteData'));
            
            // 确保works数组存在
            if (!data.works) {
                data.works = [];
            }
            
            // 添加新作品对象
            data.works.push({
                image: '',
                title: '',
                category: '',
                size: 'medium'
            });
            
            // 保存数据
            localStorage.setItem('portfolioSiteData', JSON.stringify(data));
            
            // 重新加载编辑器
            loadEditorData();
        }
        
        // 删除动态作品
        function deleteDynamicWork(index) {
            if (confirm('确定要删除这个作品吗？')) {
                const data = JSON.parse(localStorage.getItem('portfolioSiteData'));
                
                // 删除作品数据
                if (data.works && data.works.length > index) {
                    data.works.splice(index, 1);
                }
                
                // 保存数据
                localStorage.setItem('portfolioSiteData', JSON.stringify(data));
                
                // 重新加载编辑器
                loadEditorData();
            }
        }
        
        // 更新作品数据
        function updateWorkData(index, field, value) {
            const data = JSON.parse(localStorage.getItem('portfolioSiteData'));
            
            // 确保works数组存在
            if (!data.works) {
                data.works = [];
            }
            
            // 确保作品对象存在
            if (data.works.length <= index) {
                data.works[index] = {
                    image: '',
                    title: '',
                    category: '',
                    size: 'medium'
                };
            }
            
            // 更新作品字段
            data.works[index][field] = value;
            
            // 保存数据
            localStorage.setItem('portfolioSiteData', JSON.stringify(data));
            
            // 如果是图片，更新预览
            if (field === 'image') {
                const preview = document.getElementById(`preview-work-${index}`);
                if (preview) {
                    preview.style.backgroundImage = `url(${value || ''})`;
                    preview.innerHTML = value ? '' : '<span style="color: #a0a0a0;">点击输入图片URL</span>';
                }
            }
        }
        
        function handleImageUrlChange(imageKey, url) {
            if (url) {
                // 更新预览图
                const preview = document.getElementById(`preview-${imageKey}`);
                preview.style.backgroundImage = `url(${url})`;
                preview.innerHTML = '';
                
                // 保存到localStorage
                const data = JSON.parse(localStorage.getItem('portfolioSiteData'));
                data.images[imageKey] = url;
                localStorage.setItem('portfolioSiteData', JSON.stringify(data));
            }
        }
        
        function updateTextData(textKey, value) {
            const data = JSON.parse(localStorage.getItem('portfolioSiteData'));
            
            // 确保texts对象存在
            if (!data.texts) {
                data.texts = {};
            }
            
            // 直接保存中文文本，不使用多语言对象
            data.texts[textKey] = value;
            
            // 保存到localStorage
            localStorage.setItem('portfolioSiteData', JSON.stringify(data));
        }
        
        function saveData() {
            // 显示成功消息
            const successMessage = document.getElementById('successMessage');
            successMessage.style.display = 'block';
            
            // 3秒后隐藏消息
            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 3000);
            
            console.log('数据已保存到localStorage');
        }
        
        function publishData() {
            // 这里可以添加发布逻辑，比如同步到服务器
            saveData();
            console.log('数据已发布');
        }
    </script>
</body>
</html>